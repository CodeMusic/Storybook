@tailwind base;
@tailwind components;
@tailwind utilities;

html, body, #__next {
  height: 100%;
}

/* Storybook typography */
.font-story-title {
  font-family: 'IM Fell English', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
}
.font-story-body {
  font-family: 'Crimson Text', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
}
.prose-story {
  font-size: 1.125rem; /* larger body text */
  line-height: 1.85;
  /* Ensure Tailwind Typography doesn't override our storybook body font */
  font-family: 'Crimson Text', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
}

/* Headings inside prose should keep the story title font and natural casing */
.prose-story h1,
.prose-story h2,
.prose-story h3,
.prose-story h4,
.prose-story h5,
.prose-story h6 {
  font-family: 'IM Fell English', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  text-transform: none;
}

/* Drop cap first letter */
.dropcap p:first-of-type::first-letter {
  float: left;
  font-size: 3.25rem;
  line-height: 1;
  padding-right: 0.2rem;
  padding-top: 0.1rem;
  font-weight: 700;
  font-family: 'IM Fell English', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  color: #7c2d12;
}

/* Ensure first letter applies even when text is wrapped into spans for streaming */
.dropcap p:first-of-type > .word:first-child::first-letter,
.dropcap p:first-of-type > span:first-child::first-letter {
  float: left;
  font-size: 3.25rem;
  line-height: 1;
  padding-right: 0.2rem;
  padding-top: 0.1rem;
  font-weight: 700;
  font-family: 'IM Fell English', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  color: #7c2d12;
}

/* Counter Tailwind Typography defaults that can override our fonts */
.prose :where(p):not(:where([class~="not-prose"] *)) {
  font-family: 'Crimson Text', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
}
.prose :where(h1,h2,h3,h4,h5,h6):not(:where([class~="not-prose"] *)) {
  font-family: 'IM Fell English', ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  text-transform: none;
}

/* Word landing animation */
@keyframes story-hit {
  0% { text-shadow: 0 0 0 rgba(245, 158, 11, 0); transform: scale(0.98); }
  40% { text-shadow: 0 0 18px rgba(245, 158, 11, 0.65); transform: scale(1.01); }
  100% { text-shadow: 0 0 0 rgba(245, 158, 11, 0); transform: scale(1.0); }
}
.story-hit {
  animation: story-hit 420ms ease-out;
}

/* Page turn animation */
@keyframes page-turn {
  0% { transform: rotateY(0deg); transform-origin: left center; }
  100% { transform: rotateY(-15deg); transform-origin: left center; }
}
.page-turning {
  perspective: 1200px;
}
.page-turning .page {
  transform-style: preserve-3d;
}
.page-turning.is-turning .page {
  animation: page-turn 450ms ease;
}

/* Per-word streaming animations */
.word {
  display: inline-block;
  position: relative;
  will-change: transform, text-shadow, filter;
}
@keyframes word-woosh {
  0% { transform: translateY(0.08em) scale(0.96); text-shadow: 0 0 0 rgba(245,158,11,0); filter: drop-shadow(0 0 0 rgba(245,158,11,0)); }
  55% { transform: translateY(-0.06em) scale(1.04); text-shadow: 0 0 14px rgba(245,158,11,0.55); filter: drop-shadow(0 0 10px rgba(245,158,11,0.35)); }
  100% { transform: translateY(0) scale(1); text-shadow: 0 0 0 rgba(245,158,11,0); filter: drop-shadow(0 0 0 rgba(245,158,11,0)); }
}
.word-new { animation: word-woosh 420ms ease-out both; }

@keyframes word-flash {
  0% { text-shadow: 0 0 0 rgba(245,158,11,0); }
  40% { text-shadow: 0 0 16px rgba(245,158,11,0.6); }
  100% { text-shadow: 0 0 0 rgba(245,158,11,0); }
}
.words-flash .word { animation: word-flash 320ms ease-in-out; }


